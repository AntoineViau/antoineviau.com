
<style>

@media not print
{
   .conf article h3 {
    min-height: 2.5em !important;
  }
}


</style>


<?php
$json = file_get_contents(__DIR__."/confs.json");
$confs = json_decode($json);
usort($confs,"confsSort");

function confsSort($a, $b) {
  return $a->date < $b->date;
}
?>

<div class="container g-pt-20">


  <div class="row">
    <?php 
    foreach($confs as $idx => $conf) { 
      if (  ($idx % 3) == 0) { 
        echo '</div><div class="row">';                            
      }
      article($conf);
    }
    ?>
  </div>
</div>


<?php
function article($conf) {
  $year = substr($conf->date, 0, 4);
  $base64 = base64_encode(file_get_contents(__DIR__.'/assets/img/confs/'.$conf->picture));
  echo <<<EOT
  <div class="conf col-lg-4 g-mb-30 ">
  <article class="g-bg-white u-shadow-v21 u-shadow-v21--hover ">

     <figure class="g-pos-rel">
      <a href="$conf->link">
        <img class="img-fluid w-100 no-print" 
        src="data:image/jpeg;base64, $base64"
        alt="$conf->title" >
      </a>
    </figure>

    <div class="g-pa-10">
      <h3 class="h5 g-mb-15 ">
        <a href="$conf->link" class="title u-link-v5 g-color-gray-dark-v2 g-color-primary--hover" href="#">
          $conf->title
        </a>
      </h3>
      <hr class="g-brd-gray-light-v4 g-my-20 no-print">
      <ul class="list-inline small text-uppercase mb-0">
        <li class="list-inline-item">
          <a href="$conf->link" class="u-link-v5 g-color-main g-color-primary--hover">$conf->where</a>
        </li>
        <li class="list-inline-item">-</li>
        <li class="list-inline-item">
          <i class="icon-bubbles align-middle g-color-gray-dark-v4 g-mr-2"></i>
          $year
        </li>
      </ul>
    </div>
  </article>
  </div>
EOT;
}
?>

